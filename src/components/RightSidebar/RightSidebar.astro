---
import MoreMenu from "./MoreMenu.astro"
import { Feedback } from "../PageContent/Feedback"
import { MarkdownHeading } from "astro"
import TableOfContents from "~/components/TableOfContents/TableOfContents"

export type Props = {
  githubEditUrl: string
  headings: MarkdownHeading[]
}
const { githubEditUrl, headings } = Astro.props
---

<section class="sidebar-nav" aria-labelledby="grid-right" data-sticky>
  <h2 class="heading">On this page</h2>
  <div class="toc-wrapper">
    <TableOfContents client:media="(min-width: 50em)" initialHeadings={headings} />
  </div>
  <MoreMenu editHref={githubEditUrl} />
  <h2 class="heading feedback-title">Feedback</h2>
  <div class="feedback-wrapper">
    <Feedback client:idle />
  </div>
</section>

<style>
  .sidebar-nav {
    height: fit-content;
    padding: var(--doc-padding) 0 calc(2 * var(--doc-padding)) 0;
    position: sticky;
    top: 0;
    /* Keeps the content from breaking when collapsed in DocsLayout */
    min-width: calc(315px - var(--space-16x));
  }

  .heading {
    color: var(--color-text-heading);
    font-size: 12px;
    letter-spacing: 1px;
    font-weight: 500;
    text-transform: uppercase;
    margin-bottom: 0;
  }

  .feedback-title {
    margin-top: var(--space-8x);
  }

  .feedback-wrapper {
    margin-top: var(--space-3x);
  }

  .toc-wrapper {
    padding: 0;
    margin-bottom: var(--space-8x);
  }
</style>
