---
layout: ../../../../../layouts/MainLayout.astro
section: vrf
title: "Local testing using a Mock contract"
metadata:
  description: "Example contract for generating random words using the VRF v2 direct funding method on your local blockchain using a mock contract."
---

import VrfCommon from "@features/vrf/v2/common/VrfCommon.astro"
import ContentCommon from "@features/common/ContentCommon.astro"
import { CodeSample, ClickToZoom } from "@components"

<VrfCommon callout="directFunding" />

This guide explains how to test Chainlink VRF v2 on a [Remix IDE](https://remix-ide.readthedocs.io/en/latest/run.html#environment) sandbox blockchain environment. **Note**: You can reuse the same logic on another development environment, such as hardhat or truffle. For example, read the hardhat starter kit [RandomNumberConsuper unit tests](https://github.com/smartcontractkit/hardhat-starter-kit/blob/main/test/unit/RandomNumberDirectFundingConsumer.spec.js).

## Benefits of local testing

<ContentCommon section="localTestingBenefits" />

## Testing logic

Complete the following tasks to test your VRF v2 consumer locally:

1. Deploy the [VRFCoordinatorV2Mock](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/mocks/VRFCoordinatorV2Mock.sol). This contract is a mock of the [VRFCoordinatorV2](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/VRFCoordinatorV2.sol) contract.
1. Call the VRFCoordinatorV2Mock [createSubscription function](https://github.com/smartcontractkit/chainlink/blob/abf1d19c147c4fd54173b48140706780b53be474/contracts/src/v0.8/mocks/VRFCoordinatorV2Mock.sol#L176) to create a new subscription.
1. Call the VRFCoordinatorV2Mock [fundSubscription function](https://github.com/smartcontractkit/chainlink/blob/abf1d19c147c4fd54173b48140706780b53be474/contracts/src/v0.8/mocks/VRFCoordinatorV2Mock.sol#L138) to fund your newly created subscription. **Note**: You can fund with an arbitrary amount.
1. Deploy the [MockV3Aggregator](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/tests/MockV3Aggregator.sol) contract.
1. Deploy the [LinkToken](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.4/LinkToken.sol) contract.
1. Deploy the [VRFV2Wrapper](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/VRFV2Wrapper.sol) contract.
1. Call the the VRFCoordinatorV2Mock [addConsumer function](https://github.com/smartcontractkit/chainlink/blob/abf1d19c147c4fd54173b48140706780b53be474/contracts/src/v0.8/mocks/VRFCoordinatorV2Mock.sol#L229) to add the wrapper contract to your subscription.
1. Deploy your VRF consumer contract.
1. Request random words from your consumer contract.
1. Call the VRFCoordinatorV2Mock [fulfilRandomWords function](https://github.com/smartcontractkit/chainlink/blob/abf1d19c147c4fd54173b48140706780b53be474/contracts/src/v0.8/mocks/VRFCoordinatorV2Mock.sol#L88) to fulfill your consumer contract request.

## Testing

### Open the contracts on RemixIDE

Open _VRFCoordinatorV2Mock_ and compile in Remix:

<CodeSample src="samples/VRF/mock/VRFCoordinatorV2Mock.sol" />

Open _MockV3Aggregator_ and compile in Remix:

<CodeSample src="samples/VRF/mock/MockV3Aggregator.sol" />

Open _LinkToken_ and compile in Remix:

<CodeSample src="samples/VRF/mock/LinkToken.sol" />

Open _VRFV2Wrapper_ and compile in Remix:

<CodeSample src="samples/VRF/mock/VRFV2Wrapper.sol" />

Open _RandomNumberDirectFundingConsumerV2_ and compile in Remix:

<CodeSample src="samples/VRF/mock/RandomNumberDirectFundingConsumerV2.sol" />

Your RemixIDE file explorer should display the opened contracts:
