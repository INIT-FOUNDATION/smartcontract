---
section: dataStreams
date: Last Modified
title: "Streams Direct SDK (Go)"
---

import DataStreams from "@features/data-streams/common/DataStreams.astro"

<DataStreams section="dsNotes" />

This documentation provides a detailed reference for the `client` package, which offers a domain-oriented abstraction for interacting with the Data Streams API. The package enables both point-in-time data retrieval and real-time data streaming with built-in fault tolerance features.

## Installation

```go
import streams "github.com/smartcontractkit/data-streams-sdk/go"
```

## Types

### [`Client` interface](https://github.com/smartcontractkit/data-streams-sdk/blob/80dd72e50e178a38c0e2d842737ea57fdb12de8b/go/client.go#L18)

[Interface](https://github.com/smartcontractkit/data-streams-sdk/blob/80dd72e50e178a38c0e2d842737ea57fdb12de8b/go/client.go#L18) for interacting with the Data Streams API.

###### Interface Methods

- `GetFeeds`: Lists all feeds available to you.

  ```go
  GetFeeds(ctx context.Context) (r []*Feed, err error)
  ```

- `GetLatestReport`: Fetches the latest report available for the specified `FeedID`.

  ```go
  GetLatestReport(ctx context.Context, id FeedID) (r *Report, err error)
  ```

- `GetReports`: Fetches reports for the specified feed IDs and a given timestamp.

  ```go
  GetReports(ctx context.Context, ids []FeedID, timestamp uint64) ([]*Report, error)
  ```

- `GetReportPage`: Paginates the reports for a specified `FeedID` starting from a given timestamp.

  ```go
  GetReportPage(ctx context.Context, id FeedID, startTS uint64) (*ReportPage, error)
  ```

- `Stream`: Creates a real-time report stream for specified feed IDs.

  ```go
  Stream(ctx context.Context, feedIDs []FeedID) (Stream, error)
  ```

### `Config` struct

Configuration struct for the client. `Config` specifies the client configuration and dependencies. If you specify the `Logger` function, informational client activity is logged.

```go
type Config struct {
	ApiKey             string // Client Api key
	ApiSecret          string // Client Api secret
	RestURL            string // Rest Api url
	restURL            *url.URL // Rest Api url
	WsURL              string // Websocket Api url
	wsURL              *url.URL // Websocket Api url
	WsHA               bool // Use concurrent connections to multiple Streams servers
	WsMaxReconnect     int // Maximum number of reconnection attempts for Stream underlying connections
	LogDebug           bool // Log debug information
	InsecureSkipVerify bool // Skip server certificate chain and host name verification
	Logger             func(format string, a ...any) // Logger function

	// InspectHttp intercepts http responses for rest requests.
	// The response object must not be modified.
	InspectHttpResponse func(*http.Response)
}
```

### `CtxKey` string

Custom context key type used for passing additional headers.

```go
type CtxKey string
```

- Constants:

  - `CustomHeadersCtxKey`: Key for passing custom HTTP headers.

  ```go
  const (
    // CustomHeadersCtxKey is used as key in the context.Context object
    // to pass in a custom http headers in a http.Header to be used by the client.
    // Custom header values will overwrite client headers if they have the same key.
    CustomHeadersCtxKey CtxKey = "CustomHeaders"
  )
  ```

### `Feed` struct

Identifies the report stream ID.

```go
type Feed struct {
	FeedID FeedID `json:"feedID"`
}
```

Where `FeedID` is the unique identifier for the feed.

### `FeedID` [32]byte

Represents a unique identifier for a feed.

```go
type FeedID [32]byte
```

##### Methods

- `FromString`: Converts a string into a `FeedID`.

  ```go
  func (f *FeedID) FromString(s string) (err error)
  ```

- `MarshalJSON`: Serializes the `FeedID` into JSON.

  ```go
  func (f *FeedID) MarshalJSON() (b []byte, err error)
  ```

- `String`: Returns the string representation of the `FeedID`.

  ```go
  func (f *FeedID) String() (id string)
  ```

- `UnmarshalJSON`: Deserializes the `FeedID` from JSON.
  ```go
  func (f *FeedID) UnmarshalJSON(b []byte) (err error)
  ```

### `Report` struct

Represents the report envelope that contains the full report payload, its Feed ID, and timestamps.

```go
type Report struct {
    FeedID                FeedID `json:"feedID"` // Unique identifier of the feed.
    FullReport            []byte `json:"fullReport"` // Raw report data.
    ValidFromTimestamp    uint64 `json:"validFromTimestamp"` // Start validity of the report.
    ObservationsTimestamp uint64 `json:"observationsTimestamp"` // Timestamp of the data observation.
}
```

##### Methods

- `MarshalJSON`: Serializes the Report into JSON, facilitating easier transmission over network interfaces.

  ```go
  func (r *Report) MarshalJSON() ([]byte, error)
  ```

- `String`: Provides a string representation of the Report, typically for logging or debugging purposes.

  ```go
  func (r *Report) String() (s string)
  ```

- `UnmarshalJSON`: Deserializes the JSON representation of a Report back into its complex Go struct form, allowing for manipulation within Go code.

  ```go
  func (r *Report) UnmarshalJSON(b []byte) (err error)
  ```

### `ReportPage` struct

Represents a paginated response of reports.

```go
type ReportPage struct {
	Reports    []*Report // Slice of Report, representing individual report entries.
	NextPageTS uint64 // Timestamp for the next page, used for fetching subsequent pages.
}
```

### `Stats` struct

Statistics related to the Stream's operational metrics.

```go
type Stats struct {
	Accepted              uint64 // Total number of accepted reports
	Deduplicated          uint64 // Total number of deduplicated reports when in HA
	TotalReceived         uint64 // Total number of received reports
	PartialReconnects     uint64 // Total number of partial reconnects when in HA
	FullReconnects        uint64 // Total number of full reconnects
	ConfiguredConnections uint64 // Number of configured connections if in HA
	ActiveConnections     uint64 // Current number of active connections
}
```

##### Methods

- `String`: Returns a string representation of the `Stats`.

  ```go
  func (s Stats) String() (st string)
  ```

### `Stream` interface

[Interface](https://github.com/smartcontractkit/data-streams-sdk/blob/80dd72e50e178a38c0e2d842737ea57fdb12de8b/go/stream.go#L88) for managing a real-time data stream.

##### Interface Methods

- `Read`: Reads the next available report from the stream. This method will pause (block) the execution until one of the following occurs:

  - A report is successfully received.
  - The provided context is canceled, typically due to a timeout or a cancel signal.
  - An error state is encountered in any of the underlying connections, such as a network failure.

  ```go
  Read(context.Context) (*Report, error)
  ```

- `Stats`: Returns statistics about the stream operations as `Stats`.

  ```go
  Stats() Stats
  ```

- `Close`: Closes the stream.

  ```go
  Close() error
  ```

## Functions

### `New`

Creates a new client instance with the specified configuration.

```go
func New(cfg Config) (c Client, err error)
```

**Note**: `New` does not initialize any connections to the Data Streams service.

### `LogPrintf`

Utility function for logging.

```go
func LogPrintf(format string, a ...any)
```
